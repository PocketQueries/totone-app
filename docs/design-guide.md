# UI/UX デザインガイド：Totonoe（ととのえ）

## 1. ブランド・アイデンティティ

| 項目 | 内容 |
|------|------|
| アプリ名 | **Totonoe** |
| コンセプト | 「会議の混沌を、明快な秩序へ。」 |
| キーワード | 静寂、規律、透明感、円滑 |

日本語の「整える」が持つ **「乱れたものを正す」「準備を完了させる」「心身を落ち着かせる」** という多面的な意味を、Windows のモダンデザインに落とし込む。

### アプリアイコン・ロゴ

- **形状:** Windows 11 標準のアプリタイル形状（角丸スクエア）
- **背景:** 白から Toki-Pink（`#F58F98`）へのグラデーション（上→下）
- **メインモチーフ:** トキまるが櫛を持ちながら飛翔する 3D レンダリング
- **装飾要素:** トキまるの周囲に散りばめられた文字記号（言、日、九 など）と Toki-Pink の流線（羽の動き・風の表現）
- **スタイル:** 3D クレイモーフィズム（柔らかな質感、丸みのあるフォルム）
- **用途別サイズ:**

| サイズ | 用途 |
|--------|------|
| 16x16 | タイトルバー・タスクバー小 |
| 32x32 | タスクバー標準 |
| 48x48 | スタートメニュー |
| 256x256 | ストア・高解像度表示 |

### マスコットキャラクター：トキまる（Toki-maru）

- 整える象徴としての「櫛（くし）」のモチーフを持つトキ
- 白い丸みのある体に Toki-Pink のくちばし・冠羽・翼先を持つ 3D キャラクター
- 周囲に文字記号を散りばめ「乱れた会話を整理する」メタファーを表現
- UI の片隅で、複雑な会話が要約されるたびに「羽を整える」アニメーションを行う

## 2. デザインシステム（Windows Fluent Design 準拠）

Windows 11 のエコシステムに溶け込むための技術仕様。

### 2.1 ビジュアルコンセプト：Dark Cards on Light Mica

コンセプトイメージに基づく Totonoe の視覚的方向性：

- **ウィンドウ背景:** 淡いグレーの Mica Material（デスクトップとの調和）
- **コンテンツカード:** ダーク背景（`#1E1E1E`〜`#2A2A2A`）のフローティングカード
- **カード上のテキスト:** ホワイト系（`#E8E8E8`）で高コントラスト
- **アクセント要素:** Toki-Pink（`#F58F98`）を波形・チェックマーク・Suji ラインに使用

この「明るい背景にダークカードが浮かぶ」構成により、各機能ブロックの視認性を高め、モダンで整った印象を与える。

### 2.2 背景：Mica Material

- ウィンドウ全体に **Mica**（または Mica Alt）を適用
- 壁紙の色が薄く透け、デスクトップとの調和を図る
- WPF 実装: `WindowChrome` + `SystemBackdropType` を活用

### 2.3 レイアウト

- 左側に細いナビゲーション（Icons only）、中央に広大なコンテンツエリア
- **Padding / Margin:** 24px〜32px の広めの余白を取り、情報の密度を下げて「整った」印象を与える

### 2.4 角丸（Corner Radius）

- すべてのコンポーネント（カード、ボタン、入力欄）は **8px〜12px** の角丸に統一

### 2.5 タイポグラフィ

| 用途 | フォント | 備考 |
|------|----------|------|
| メイン | `BIZ UDGothic` | UD（ユニバーサルデザイン）フォント。読みやすさ重視 |
| フォールバック | `Segoe UI Variable, Segoe UI` | BIZ UDGothic 未搭載環境向け |

#### フォントサイズ階層

| レベル | サイズ | ウェイト | 用途 |
|--------|--------|----------|------|
| Display | 28px | SemiBold | 画面タイトル |
| Title | 20px | SemiBold | セクション見出し |
| Subtitle | 16px | SemiBold | サブセクション |
| Body | 14px | Regular | 本文・発言テキスト |
| Caption | 12px | Regular | タイムスタンプ・補助情報 |

## 3. カラーパレット（Totonoe Scheme）

### ライトモード

| 用途 | 色名 | HEX | 説明 |
|------|------|-----|------|
| **Primary（Accent）** | Toki-Pink | `#F58F98` | 録音モードのアクセント色 |
| **Primary（ととのえ）** | Totonoe-Green | `#6BCB77` | ととのえモードのアクセント色 |
| **Secondary** | Seiji-Grey | `#ECECEB` | 境界線や控えめな背景 |
| **Text** | Sumi-Black | `#1A1A1B` | 高い可読性を確保した墨色 |
| **Text Secondary** | — | `#5C5C5C` | 補助テキスト |
| **Success** | Success Green | `#27AE60` | 「整いました」状態の通知 |
| **Warning** | — | `#E67E22` | 注意喚起 |
| **Error** | — | `#E74C3C` | エラー通知 |
| **Surface** | — | `#FAFAFA` | カード・パネル背景 |
| **Background** | — | Mica 依存 | ウィンドウ背景（Mica Material） |

### ダークモード

| 用途 | 色名 | HEX |
|------|------|-----|
| **Primary（Accent）** | Toki-Pink | `#F58F98` |
| **Primary（ととのえ）** | Totonoe-Green | `#6BCB77` |
| **Secondary** | — | `#2D2D2D` |
| **Text** | — | `#E8E8E8` |
| **Text Secondary** | — | `#A0A0A0` |
| **Surface** | — | `#202020` |
| **Background** | — | Mica 依存 |

### XAML リソース定義例

```xml
<Color x:Key="TokiPink">#F58F98</Color>
<Color x:Key="SeijiGrey">#ECECEB</Color>
<Color x:Key="SumiBlack">#1A1A1B</Color>
<Color x:Key="SuccessGreen">#27AE60</Color>

<SolidColorBrush x:Key="AccentBrush" Color="{StaticResource TokiPink}" />
<SolidColorBrush x:Key="SecondaryBrush" Color="{StaticResource SeijiGrey}" />
<SolidColorBrush x:Key="TextPrimaryBrush" Color="{StaticResource SumiBlack}" />
<SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessGreen}" />
```

## 4. 独自 UI エレメント

### 4.1 Vertical "Suji"（The Line）

画面中央を貫く **1px の繊細な垂直線**。情報が左から右へ整理される流れを可視化する。

```
┌────────────────────┐───┌────────────────────┐
│                    │ │ │                    │
│  生の音声データ     │ │ │  AIによる要約       │
│  発言ログ          │ │ │  決定事項           │
│  タイムスタンプ     │ │ │  ToDo              │
│                    │ │ │                    │
└────────────────────┘───└────────────────────┘
         ← Raw               Organized →
```

- 左側：チャット形式で発言者のアイコンとテキストを表示
- 右側：AI が生成した「決定事項」「ToDo」をカード形式で表示
- Suji の色: `Toki-Pink`（`#F58F98`）— コンセプトイメージ準拠

### 4.2 Kushi-Sweep Animation

テキストが構造化（要約）される際のエフェクト：

1. 上から下へ **光の帯**（Toki-Pink のグラデーション）が掃くように移動
2. 乱雑なテキストが箇条書きに変化する
3. 完了時に Success Green のフェードインで「整いました」を伝達

```
実装方針:
- WPF Storyboard + TranslateTransform で光の帯を移動
- OpacityAnimation で要約前テキスト → 要約後テキストをクロスフェード
- Duration: 600ms〜800ms（自然で落ち着いた速度）
```

### 4.3 トキまるアニメーション

- 待機状態: 静かに佇む（微呼吸アニメーション）
- 処理中: 羽を広げるアニメーション
- 完了時: 羽を整える動作 → 静止

## 5. コンポーネント仕様

### 5.1 ボタン

| 種類 | 背景 | テキスト | 角丸 | 高さ | 用途 |
|------|------|----------|------|------|------|
| Primary | `#F58F98` | White | 8px | 36px | 録音開始・文字起こし実行 |
| Secondary | `#ECECEB` | `#1A1A1B` | 8px | 36px | キャンセル・設定 |
| Ghost | Transparent | `#1A1A1B` | 8px | 36px | ナビゲーション・補助操作 |
| Danger | `#E74C3C` | White | 8px | 36px | 削除・停止 |

- Hover: 背景色の明度を 10% 変化
- Pressed: 背景色の明度を 15% 変化 + `ScaleTransform(0.98)`
- Disabled: `Opacity="0.4"`

### 5.2 コンテンツカード（Dark Card）

コンセプトイメージに基づき、主要コンテンツはダーク背景カードに配置する。

```
┌─────────────────────────────────────┐
│  [Icon]  カードタイトル              │  ← 16px SemiBold, White
│                                     │
│  カード本文テキスト                  │  ← 14px Regular, #E8E8E8
│                                     │
│  [アクションボタン]                  │
└─────────────────────────────────────┘

- 背景: #1E1E1E〜#2A2A2A（ダーク）
- テキスト: #E8E8E8（ライト）
- タイトル: #FFFFFF, SemiBold, UPPERCASE
- 角丸: 12px
- Shadow: 0 2px 8px rgba(0,0,0,0.16)
- Padding: 16px〜20px
```

### 5.3 話者分離カード（Speaker Differentiation）

コンセプトイメージ「SPEAKER DIFFERENTIATION」カードに基づく話者表示。

```
┌─────────────────────────────────────┐
│  SPEAKER DIFFERENTIATION            │  ← UPPERCASE タイトル
│                                     │
│  ┌─────────────────────────────┐   │
│  │ (🩷) Aさん              ⋮  │   │  ← Toki-Pink アバター
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ (🩷) Bさん              ⋮  │   │  ← Rose アバター
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘

- カード背景: #1E1E1E（Dark Card）
- 話者行背景: #2A2A2A（サブカード）
- アバター: 円形（24px）、Toki-Pink 系の色相で話者ごとに差別化
- テキスト: #E8E8E8
- 角丸: 8px（サブカード）、12px（外カード）
```

### 5.3.1 発言バブル（詳細表示）

文字起こし詳細ビューでの個別発言表示。

```
┌─────────────────────────────────────┐
│ [Avatar] 話者名       00:01:23      │  ← Caption 12px
│                                     │
│ 発言テキストがここに表示されます。    │  ← Body 14px
└─────────────────────────────────────┘

- マイク（自分）: 左寄せ、背景 #2A2A2A
- スピーカー（相手）: 左寄せ、背景 #2D2028（Toki-Pink 薄暗）
- テキスト: #E8E8E8
- 角丸: 12px（自分の発言は左上のみ 4px）
- マージン（バブル間）: 8px
```

### 5.4 リアルタイム波形表示（Recording Waveform）

コンセプトイメージ「REAL-TIME RECORDING」カードに基づく波形ビジュアライゼーション。

```
┌─────────────────────────────────────┐
│  REAL-TIME RECORDING                │  ← UPPERCASE, 14px SemiBold
│                                     │
│  ╻╻╻║║║╻╻║║║║╻╻╻║╻╻╻╻║║║║╻╻╻╻╻   │  ← Toki-Pink 波形
│                                     │
└─────────────────────────────────────┘

- カード背景: #1E1E1E（Dark Card）
- 波形色: Toki-Pink（#F58F98）
- 波形スタイル: 中央線から上下対称に振幅を描画
- 更新頻度: ~30fps
- 角丸: 12px
```

### 5.5 AI 要約カード（AI Summary & ToDo's）

コンセプトイメージ「AI SUMMARY & TO-DO'S」カードに基づく要約・タスク表示。

```
┌─────────────────────────────────────┐
│  AI SUMMARY & TO-DO'S               │  ← UPPERCASE タイトル
│                                     │
│  決定事項                            │  ← Subtitle
│  ✓  M&G管理を継続           (✓)    │  ← Toki-Pink チェック
│  ✓  Todo項目を追加           (✓)    │
│                                     │
└─────────────────────────────────────┘

- カード背景: #1E1E1E（Dark Card）
- チェックマーク: Toki-Pink（#F58F98）
- 完了バッジ: 円形 Toki-Pink 背景 + White チェック
- 未完了: #5C5C5C のアウトライン円
- テキスト: #E8E8E8
- 角丸: 12px
```

### 5.6 レベルメーター

- Peak / RMS を水平バーで可視化
- 通常: Toki-Pink グラデーション（左→右で濃くなる）
- クリッピング: Error Red に変化
- 無音: Seiji-Grey で薄く表示
- 更新頻度: ~30fps
- 角丸: 4px
- 高さ: 8px

### 5.7 ナビゲーション（左サイドバー）

```
┌──┐
│🎙│  録音
│──│
│📝│  文字起こし
│──│
│📋│  議事録
│──│
│⚙│  設定
└──┘

- 幅: 48px（アイコンのみ）、展開時 200px
- アイコンサイズ: 20px
- 選択状態: Toki-Pink 背景（Opacity 0.12）+ 左に 3px のアクセントバー
- Hover: 背景 Opacity 0.06
```

## 6. 画面構成

### 6.1 メイン画面（録音ビュー）

```
┌─────────────────────────────────────────────┐
│ [Nav]  Totonoe                    [⚙] [─□✕] │  ← タイトルバー
├──┬──────────────────────────────────────────┤
│🎙│                                          │
│  │  ┌ デバイス選択 ─────────────────────┐   │
│📝│  │ Input:  [マイク ▼]                │   │
│  │  │ Output: [スピーカー ▼]            │   │
│📋│  └──────────────────────────────────┘   │
│  │                                          │
│⚙│  ┌ レベルメーター ───────────────────┐   │
│  │  │ Mic:     [████████░░░] -12.3 dB  │   │
│  │  │ Speaker: [██████░░░░░] -18.7 dB  │   │
│  │  └──────────────────────────────────┘   │
│  │                                          │
│  │        ● 00:15:23                        │  ← 録音時間
│  │                                          │
│  │     [ ⏹ 停止 ]  [ ⏸ 一時停止 ]          │
│  │                                          │
│  │  ┌ ステータス ──────────────────────┐   │
│  │  │ ✅ 録音中 - セッション保存先: ... │   │
│  │  └──────────────────────────────────┘   │
└──┴──────────────────────────────────────────┘
```

### 6.2 文字起こしビュー（Suji レイアウト）

```
┌─────────────────────────────────────────────┐
│ [Nav]  文字起こし                  [⚙] [─□✕] │
├──┬──────────────────┬─┬─────────────────────┤
│🎙│ 発言ログ         │S│ AI 要約             │
│  │                  │u│                     │
│📝│ [Avatar] 田中    │j│ ■ 決定事項          │
│  │ 次の四半期の...  │i│  ・予算は据え置き   │
│📋│                  │ │  ・リリース日は3月  │
│  │ [Avatar] 鈴木    │ │                     │
│⚙│ 私はそれに...    │ │ ■ ToDo             │
│  │                  │ │  ・資料を更新       │
│  │ [Avatar] 田中    │ │  ・見積もりを提出   │
│  │ ありがとう...    │ │                     │
└──┴──────────────────┴─┴─────────────────────┘
```

### 6.3 設定画面

```
┌─────────────────────────────────────────────┐
│  設定                              [✕ 閉じる] │
├─────────────────────────────────────────────┤
│                                             │
│  文字起こしエンジン                          │
│  ○ クラウド（OpenAI Whisper API）            │
│  ● ローカル（Whisper.net）                   │
│                                             │
│  ─────────────────────────────────────────  │
│                                             │
│  OpenAI API キー                             │
│  [sk-••••••••••••••••]  [表示/非表示]        │
│                                             │
│  Whisper モデルパス                           │
│  [C:\models\ggml-base.bin]  [参照...]        │
│                                             │
│  言語                                        │
│  [日本語 ▼]                                  │
│                                             │
│              [ 保存 ]  [ キャンセル ]         │
└─────────────────────────────────────────────┘
```

## 7. アニメーション・トランジション仕様

| 対象 | アニメーション | Duration | Easing |
|------|--------------|----------|--------|
| ページ遷移 | スライド＋フェード | 300ms | CubicBezier(0.1, 0.9, 0.2, 1) |
| カード出現 | フェードイン＋スケール | 200ms | EaseOut |
| ボタン押下 | スケール(0.98) | 100ms | EaseInOut |
| Kushi-Sweep | 光の帯移動 | 600〜800ms | Linear |
| トキまる動作 | フレームアニメ | 1200ms | — |
| 通知トースト | スライドイン（右下から） | 250ms | EaseOut |
| レベルメーター | バー伸縮 | 33ms (~30fps) | Linear |

## 8. アクセシビリティ

- **コントラスト比:** テキストは WCAG AA 基準（4.5:1 以上）を満たすこと
  - `#1A1A1B` on `#FAFAFA` → コントラスト比 17.4:1 ✅
  - `#F58F98` on `#FFFFFF` → コントラスト比 2.8:1 ⚠️（アクセント色はテキストに使用しない、背景・装飾に限定）
- **キーボード操作:** すべての操作がキーボードのみで完結すること
- **スクリーンリーダー:** `AutomationProperties.Name` をすべてのインタラクティブ要素に設定
- **フォーカスインジケーター:** Toki-Pink（2px solid）で明示

## 9. レスポンシブ対応

| ウィンドウ幅 | レイアウト |
|-------------|----------|
| 800px 以上 | Suji レイアウト（左右分割） |
| 560px〜800px | シングルカラム（タブ切替） |
| 560px 未満 | ナビゲーション非表示、コンパクト表示 |

最小ウィンドウサイズ: **480 x 600**

## 10. 実装状況

### MVP 実装済み

| 項目 | 内容 |
|------|------|
| **カラーパレット** | Toki-Pink / Seiji-Grey / Sumi-Black / Success Green / Warning Orange / Error Red を `TotonoeTheme.xaml` で一元管理 |
| **Dark Cards on Light Background** | ウィンドウ背景は淡いグレー（`#EAEAEA`）、コンテンツは `#1E1E1E` ダークカード上に配置 |
| **タイポグラフィ** | `BIZ UDGothic`（UDフォント）をプライマリフォント、`Cascadia Code` をモノスペースフォントとして設定 |
| **ボタンスタイル** | Primary（Toki-Pink）/ Secondary（Seiji-Grey）/ Ghost（Transparent）/ Danger（Error Red）の 4 種 + Hover/Pressed/Disabled 状態 |
| **角丸** | ボタン 8px、カード 12px、レベルメーター 4px で統一 |
| **レベルメーター** | Toki-Pink 基調、無音時グレー、高レベル時 Warning Orange → Error Red |
| **Dark Tab Control** | Dark Card 上のタブ、Toki-Pink の下線インジケーター |
| **設定画面** | Dark Card レイアウト、統一されたテキスト入力スタイル |
| **ボタン押下アニメーション** | `ScaleTransform(0.98)` |
| **フォーカスインジケーター** | TextBox / PasswordBox 入力時に Toki-Pink ボーダー |
| **アプリ名** | タイトルバー・ヘッダーに「Totonoe」を表示 |
| **ComboBox ダークテーマ** | ControlTemplate 全書き換えによるダークポップアップ・Toki-Pink 選択ハイライト |
| **RadioButton ダークテーマ** | Toki-Pink ドット + ダーク背景対応のカスタムテンプレート |
| **PasswordBox 角丸** | CornerRadius 8px のカスタムテンプレート + フォーカス時 Toki-Pink ボーダー |
| **ScrollBar ダークテーマ** | 薄型（8px）ダークスクロールバー、ドラッグ時 Toki-Pink |
| **アプリアイコン** | Toki-Pink グラデーション背景に「T」ロゴのプログラム生成アイコン |

### v1.1 実装済み

| 項目 | 内容 |
|------|------|
| **波形表示コントロール** | `WaveformControl` でToki-Pink波形を中央線から上下対称に描画。再生位置インジケーター（白垂直線 + ノブ）、マウスドラッグシーク対応 |
| **シークスライダー** | `DarkSlider` スタイル: Toki-Pink のトラック + 円形サムネイル。再生位置と双方向バインド |
| **話者分離カード** | 発言バブルで話者（🎙自分/🔊相手）をアイコン・ラベル・背景色（`#2A2A2A`/`#2D2028`）で区別。デザインガイドセクション5.3.1準拠 |
| **話者波形オーバーレイ** | 波形上にマイク発言区間（下半分・Toki-Pink薄）とスピーカー発言区間（上半分・青系薄）を色分け表示 |
| **再生タブ** | 再生コントロール（Play/Pause/Stop）、トラック切替（Mic/Speaker）、時間表示、波形 + スライダー + 発言バブルの統合UI |

### 未実装（今後の対応候補）

| 項目 | 難易度 | 理由・備考 |
|------|--------|-----------|
| **Mica Material 背景** | 高 | Windows 11 の `DwmSetWindowAttribute` P/Invoke が必要。WPF 標準では非対応。代替として淡いグレー背景を使用中 |
| **左サイドバーナビゲーション** | 高 | 現在の Grid ベースレイアウトからの大規模構造変更が必要。ナビゲーション VM・ページ遷移フレームワークの導入を伴う |
| **Suji レイアウト（左右分割）** | 中 | 文字起こしビューの 2 ペイン化が必要。ウィンドウ幅 800px 以上での表示を想定 |
| **Kushi-Sweep アニメーション** | 中 | Storyboard + TranslateTransform による光の帯アニメーション。要約機能との連携が必要 |
| **トキまる（マスコット）** | 高 | 3D レンダリングアセットの制作が必要。フレームアニメーション基盤の構築を伴う |
| **レスポンシブレイアウト** | 中 | `VisualStateManager` による 3 段階のウィンドウ幅対応。サイドバー導入後に実装 |
| **AI 要約カード** | 中 | AI 要約・ToDo 生成機能の実装が前提。将来の AI 統合フェーズで対応 |
| **ページ遷移アニメーション** | 低 | ナビゲーション導入後にスライド＋フェードを実装 |
| **通知トースト** | 低 | 右下からのスライドイン通知。カスタム Popup コントロールの実装が必要 |
| **AutomationProperties** | 低 | すべてのインタラクティブ要素にスクリーンリーダー対応属性を追加する作業 |
