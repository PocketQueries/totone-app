<Window x:Class="OnlineMeetingRecorder.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:OnlineMeetingRecorder.ViewModels"
        xmlns:controls="clr-namespace:OnlineMeetingRecorder.Controls"
        xmlns:conv="clr-namespace:OnlineMeetingRecorder.Converters"
        xmlns:models="clr-namespace:OnlineMeetingRecorder.Models"
        mc:Ignorable="d"
        Title="Totonoe - Online Meeting Recorder"
        Height="680" Width="840"
        MinHeight="400" MinWidth="640"
        Background="{StaticResource WindowBgBrush}"
        FontFamily="{StaticResource PrimaryFont}"
        WindowStartupLocation="CenterScreen"
        d:DataContext="{d:DesignInstance Type=vm:MainViewModel}">

    <Window.Resources>
        <conv:BoolToVisibilityConverter x:Key="BoolToVisibility"/>
        <conv:NetworkStatusToIconConverter x:Key="NetworkStatusToIcon"/>
        <conv:SessionStatusToTextConverter x:Key="SessionStatusToText"/>
        <conv:SpeakerToBrushConverter x:Key="SpeakerToBrush"/>
        <conv:SpeakerToIconConverter x:Key="SpeakerToIcon"/>
        <conv:SpeakerToLabelConverter x:Key="SpeakerToLabel"/>
        <conv:TimeSpanToStringConverter x:Key="TimeSpanToString"/>
        <conv:EnumToBoolConverter x:Key="EnumBoolConverter"/>
        <conv:EqualityConverter x:Key="EqualityConverter"/>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ====== Row 0: ãƒ˜ãƒƒãƒ€ãƒ¼ ====== -->
        <DockPanel Grid.Row="0" Margin="0,0,0,12">
            <!-- å·¦: ã‚¿ã‚¤ãƒˆãƒ« -->
            <TextBlock Text="Totonoe"
                       FontSize="24" FontWeight="SemiBold"
                       Foreground="{StaticResource TextPrimaryBrush}"
                       VerticalAlignment="Center"
                       DockPanel.Dock="Left"/>

            <!-- å³: ãƒœã‚¿ãƒ³ç¾¤ -->
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center">
                <!-- éŒ²éŸ³ã‚¬ã‚¸ã‚§ãƒƒãƒˆã‚’è¡¨ç¤ºãƒœã‚¿ãƒ³ -->
                <Button Content="ðŸŽ™ éŒ²éŸ³"
                        Click="GadgetButton_Click"
                        ToolTip="éŒ²éŸ³ã‚¬ã‚¸ã‚§ãƒƒãƒˆã‚’è¡¨ç¤º"
                        Style="{StaticResource PrimaryButton}"
                        Height="32" Padding="16,0" FontSize="12" Margin="0,0,12,0"/>

                <Button Content="âš™ è¨­å®š" Style="{StaticResource GhostButton}"
                        Command="{Binding OpenSettingsCommand}"
                        Height="32" Padding="12,0" FontSize="12" Margin="0,0,8,0"/>
                <Border Background="{StaticResource SecondaryBrush}"
                        CornerRadius="12" Padding="8,4">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding IsOnline, Converter={StaticResource NetworkStatusToIcon}}"
                                   FontSize="13" Margin="0,0,4,0" VerticalAlignment="Center"/>
                        <TextBlock Text="{Binding NetworkStatusText}"
                                   FontSize="11" Foreground="{StaticResource TextSecondaryBrush}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </DockPanel>

        <!-- ====== Row 1: ãƒ¢ãƒ‡ãƒ«æƒ…å ±ãƒãƒ¼ ====== -->
        <Border Grid.Row="1" Background="{StaticResource DarkCardBgBrush}"
                CornerRadius="8" Padding="16,8" Margin="0,0,0,8">
            <StackPanel Orientation="Horizontal">
                <TextBlock FontSize="11" Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                           VerticalAlignment="Center" Margin="0,0,12,0">
                    <Run Text="STT:"/>
                    <Run Text="{Binding SttModelName, Mode=OneWay}"
                         Foreground="{StaticResource DarkCardTextBrush}"
                         FontWeight="SemiBold"/>
                </TextBlock>
                <TextBlock Text="â”‚" FontSize="11"
                           Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                           VerticalAlignment="Center" Margin="0,0,12,0"/>
                <TextBlock FontSize="11" Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                           VerticalAlignment="Center">
                    <Run Text="è­°äº‹éŒ²:"/>
                    <Run Text="{Binding MinutesModelName, Mode=OneWay}"
                         Foreground="{StaticResource DarkCardTextBrush}"
                         FontWeight="SemiBold"/>
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- ====== Row 2: è¨­å®šæœªå®Œäº†ã®è­¦å‘ŠãƒãƒŠãƒ¼ ====== -->
        <Border Grid.Row="2"
                Background="#FFF8E1" BorderBrush="{StaticResource WarningBrush}" BorderThickness="1"
                CornerRadius="8" Padding="16,12" Margin="0,0,0,8"
                Visibility="{Binding Transcription.IsTranscriptionConfigured, Converter={StaticResource BoolToVisibility}, ConverterParameter=Inverse}">
            <DockPanel>
                <TextBlock Text="âš " FontSize="18" VerticalAlignment="Center" Margin="0,0,12,0"/>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="æ–‡å­—èµ·ã“ã—ã‚¨ãƒ³ã‚¸ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"
                               FontWeight="SemiBold" FontSize="14"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <TextBlock Text="éŒ²éŸ³ã‚’é–‹å§‹ã™ã‚‹ã«ã¯ã€è¨­å®šç”»é¢ã§æ–‡å­—èµ·ã“ã—ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆAPIã‚­ãƒ¼ã¾ãŸã¯ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚"
                               FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"
                               TextWrapping="Wrap" Margin="0,4,0,0"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- ====== Row 3-5: ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§ + ã‚¿ãƒ– ====== -->
        <Grid Grid.Row="3" Grid.RowSpan="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="220" MinWidth="160"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*" MinWidth="300"/>
            </Grid.ColumnDefinitions>

            <!-- å·¦ãƒ‘ãƒãƒ«: ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§ -->
            <Border Grid.Column="0" Style="{StaticResource DarkCard}" Margin="0,0,4,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                    <DockPanel Grid.Row="0" Margin="0,0,0,8">
                        <TextBlock Text="SESSIONS"
                                   FontSize="11" FontWeight="SemiBold"
                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                   VerticalAlignment="Center"/>
                        <Button Content="â†»"
                                Style="{StaticResource GhostButton}"
                                Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                Command="{Binding SessionList.LoadSessionsCommand}"
                                HorizontalAlignment="Right"
                                Height="24" Width="28" Padding="0" FontSize="13"
                                ToolTip="ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§ã‚’æ›´æ–°"/>
                    </DockPanel>

                    <!-- ã‚»ãƒƒã‚·ãƒ§ãƒ³åç·¨é›†ãƒ‘ãƒãƒ« -->
                    <Border Grid.Row="1" Background="#333" CornerRadius="6"
                            Padding="8,6" Margin="0,0,0,6">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Setter Property="Visibility" Value="Visible"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding SessionList.EditingSession}" Value="{x:Null}">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0"
                                     Text="{Binding SessionList.EditingTitle, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource DarkTextBox}"
                                     FontSize="12" Height="26" Padding="4,2"
                                     VerticalContentAlignment="Center"/>
                            <Button Grid.Column="1" Content="âœ“"
                                    Style="{StaticResource TotonoePrimaryButton}"
                                    Command="{Binding SessionList.CommitEditTitleCommand}"
                                    Height="26" Width="32" Padding="0" FontSize="12"
                                    Margin="4,0,0,0"/>
                            <Button Grid.Column="2" Content="âœ•"
                                    Style="{StaticResource GhostButton}"
                                    Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                    Command="{Binding SessionList.CancelEditTitleCommand}"
                                    Height="26" Width="28" Padding="0" FontSize="11"
                                    Margin="2,0,0,0"/>
                        </Grid>
                    </Border>

                    <!-- ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§ -->
                    <ScrollViewer Grid.Row="2"
                                  Style="{StaticResource DarkScrollViewer}"
                                  VerticalScrollBarVisibility="Auto">
                        <ItemsControl ItemsSource="{Binding SessionList.Sessions}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border CornerRadius="8" Padding="10,8"
                                            Margin="0,0,0,4" Cursor="Hand">
                                        <Border.InputBindings>
                                            <MouseBinding Gesture="LeftClick"
                                                Command="{Binding DataContext.SessionList.SelectSessionCommand,
                                                    RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"/>
                                        </Border.InputBindings>
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="Background" Value="{StaticResource DarkCardBgAltBrush}"/>
                                                <Style.Triggers>
                                                    <DataTrigger Value="True">
                                                        <DataTrigger.Binding>
                                                            <MultiBinding Converter="{StaticResource EqualityConverter}">
                                                                <Binding/>
                                                                <Binding Path="DataContext.SessionList.SelectedSession"
                                                                         RelativeSource="{RelativeSource AncestorType=Window}"/>
                                                            </MultiBinding>
                                                        </DataTrigger.Binding>
                                                        <Setter Property="Background" Value="#2D3A2D"/>
                                                        <Setter Property="BorderBrush" Value="{StaticResource TotonoeAccentBrush}"/>
                                                        <Setter Property="BorderThickness" Value="2,0,0,0"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <!-- ã‚»ãƒƒã‚·ãƒ§ãƒ³å -->
                                            <DockPanel Grid.Row="0">
                                                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                                    <Button Content="ðŸ“‚"
                                                            Style="{StaticResource GhostButton}"
                                                            Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                            Command="{Binding DataContext.SessionList.OpenSessionFolderCommand,
                                                                RelativeSource={RelativeSource AncestorType=Window}}"
                                                            CommandParameter="{Binding}"
                                                            Height="18" Width="22" Padding="0" FontSize="11"
                                                            ToolTip="ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã"/>
                                                    <Button Content="ðŸ—‘"
                                                            Style="{StaticResource GhostButton}"
                                                            Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                            Command="{Binding DataContext.SessionList.DeleteSessionCommand,
                                                                RelativeSource={RelativeSource AncestorType=Window}}"
                                                            CommandParameter="{Binding}"
                                                            Height="18" Width="22" Padding="0" FontSize="11"
                                                            ToolTip="ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤" Margin="2,0,0,0"/>
                                                </StackPanel>
                                                <TextBlock FontSize="12" FontWeight="SemiBold"
                                                           Foreground="{StaticResource DarkCardTextBrush}"
                                                           TextTrimming="CharacterEllipsis"
                                                           Text="{Binding DisplayName, Mode=OneWay}"
                                                           ToolTip="ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³åã‚’ç·¨é›†">
                                                    <TextBlock.InputBindings>
                                                        <MouseBinding Gesture="LeftDoubleClick"
                                                            Command="{Binding DataContext.SessionList.BeginEditTitleCommand,
                                                                RelativeSource={RelativeSource AncestorType=Window}}"
                                                            CommandParameter="{Binding}"/>
                                                    </TextBlock.InputBindings>
                                                </TextBlock>
                                            </DockPanel>
                                            <!-- æ—¥æ™‚ + æ‰€è¦æ™‚é–“ + ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ -->
                                            <DockPanel Grid.Row="1" Margin="0,2,0,0">
                                                <TextBlock Text="{Binding Status, Converter={StaticResource SessionStatusToText}}"
                                                           FontSize="10"
                                                           Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                           DockPanel.Dock="Right"/>
                                                <TextBlock FontSize="10"
                                                           Foreground="{StaticResource DarkCardTextSecondaryBrush}">
                                                    <Run Text="{Binding StartTime, StringFormat='{}{0:MM/dd HH:mm}', Mode=OneWay}"/>
                                                    <Run Text=" â€” "/>
                                                    <Run Text="{Binding Duration, StringFormat='{}{0:hh\\:mm\\:ss}', Mode=OneWay}"/>
                                                </TextBlock>
                                            </DockPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </Border>

            <!-- ã‚¹ãƒ—ãƒªãƒƒã‚¿ãƒ¼ -->
            <GridSplitter Grid.Column="1" Width="4"
                          HorizontalAlignment="Center" VerticalAlignment="Stretch"
                          Background="Transparent"/>

            <!-- å³ãƒ‘ãƒãƒ«: é¸æŠžã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ± + ã‚¿ãƒ– -->
            <Border Grid.Column="2" Style="{StaticResource DarkCard}" Margin="4,0,0,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- é¸æŠžä¸­ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                    <Border Grid.Row="0" Background="#2A2A2A" CornerRadius="6"
                            Padding="12,8" Margin="0,0,0,8">
                        <DockPanel>
                            <TextBlock Text="ðŸ“‹" FontSize="14" VerticalAlignment="Center"
                                       Margin="0,0,8,0" DockPanel.Dock="Left"/>
                            <StackPanel>
                                <TextBlock Text="ã‚»ãƒƒã‚·ãƒ§ãƒ³æœªé¸æŠž" FontSize="13"
                                           Foreground="{StaticResource DarkCardTextSecondaryBrush}">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding SessionList.SelectedSession}" Value="{x:Null}">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                                <StackPanel>
                                    <StackPanel.Style>
                                        <Style TargetType="StackPanel">
                                            <Setter Property="Visibility" Value="Visible"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding SessionList.SelectedSession}" Value="{x:Null}">
                                                    <Setter Property="Visibility" Value="Collapsed"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                    <TextBlock FontSize="13" FontWeight="SemiBold"
                                               Foreground="{StaticResource DarkCardTextBrush}"
                                               Text="{Binding SessionList.SelectedSession.DisplayName, Mode=OneWay}"
                                               TextTrimming="CharacterEllipsis"/>
                                    <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                                        <TextBlock FontSize="11"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                   Text="{Binding SessionList.SelectedSession.StartTime, StringFormat='{}{0:yyyy/MM/dd HH:mm}'}"/>
                                        <TextBlock FontSize="11"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                   Text=" â€” " Margin="0"/>
                                        <TextBlock FontSize="11"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                   Text="{Binding SessionList.SelectedSession.Duration, StringFormat='{}{0:hh\\:mm\\:ss}'}"/>
                                        <TextBlock FontSize="11"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                   Text=" | " Margin="4,0"/>
                                        <TextBlock FontSize="11"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                   Text="{Binding SessionList.SelectedSession.Status, Converter={StaticResource SessionStatusToText}}"/>
                                    </StackPanel>
                                </StackPanel>
                            </StackPanel>
                        </DockPanel>
                    </Border>

                    <!-- ã‚¿ãƒ–ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ï¼ˆ3ã‚¿ãƒ–ï¼‰ -->
                    <TabControl Grid.Row="1" Style="{StaticResource DarkTabControl}">

                        <!-- æ–‡å­—èµ·ã“ã—ã‚¿ãƒ– -->
                        <TabItem Header="æ–‡å­—èµ·ã“ã—" Style="{StaticResource DarkTabItem}">
                            <Grid Margin="0,12,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <DockPanel Grid.Row="0" Margin="0,0,0,12">
                                    <Button Content="ã‚³ãƒ”ãƒ¼"
                                            Style="{StaticResource GhostButton}"
                                            Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                            Command="{Binding Transcription.CopyTranscriptionToClipboardCommand}"
                                            IsEnabled="{Binding Transcription.HasTranscriptionResult}"
                                            DockPanel.Dock="Right"
                                            Height="28" FontSize="11" Padding="8,0"
                                            VerticalAlignment="Center"/>

                                    <StackPanel Orientation="Horizontal">
                                        <Button Style="{StaticResource TotonoePrimaryButton}"
                                                Command="{Binding Transcription.TranscribeCommand}"
                                                IsEnabled="{Binding Transcription.CanTranscribe}"
                                                Margin="0,0,8,0">
                                            <Button.Content>
                                                <TextBlock>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Text" Value="æ–‡å­—èµ·ã“ã—é–‹å§‹"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding DataContext.Transcription.HasTranscriptionResult, RelativeSource={RelativeSource AncestorType=Window}}" Value="True">
                                                                    <Setter Property="Text" Value="æ–‡å­—èµ·ã“ã—å†å®Ÿè¡Œ"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Button.Content>
                                        </Button>

                                        <ComboBox Style="{StaticResource DarkComboBox}"
                                                  ItemContainerStyle="{StaticResource DarkComboBoxItem}"
                                                  ItemsSource="{Binding Transcription.AvailableSttEngines}"
                                                  SelectedItem="{Binding Transcription.SelectedSttEngine}"
                                                  DisplayMemberPath="DisplayName"
                                                  Visibility="{Binding Transcription.ShowSttEngineSelector, Converter={StaticResource BoolToVisibility}}"
                                                  IsEnabled="{Binding Transcription.CanTranscribe}"
                                                  Width="180" Height="32" FontSize="12"
                                                  Margin="0,0,8,0"/>

                                        <Button Content="ã‚­ãƒ£ãƒ³ã‚»ãƒ«"
                                                Style="{StaticResource SecondaryButton}"
                                                Command="{Binding Transcription.CancelTranscriptionCommand}"
                                                Visibility="{Binding Transcription.IsTranscribing, Converter={StaticResource BoolToVisibility}}"
                                                Height="36" FontSize="12"/>
                                    </StackPanel>
                                </DockPanel>

                                <StackPanel Grid.Row="1" Margin="0,0,0,8">
                                    <ProgressBar Value="{Binding Transcription.ProgressValue}" Height="4"
                                                 Visibility="{Binding Transcription.IsTranscribing, Converter={StaticResource BoolToVisibility}}"
                                                 Margin="0,0,0,6"
                                                 Style="{StaticResource TokiProgressBar}"/>
                                    <DockPanel>
                                        <Button Content="&#xE8C8;"
                                                FontFamily="Segoe MDL2 Assets"
                                                Style="{StaticResource GhostButton}"
                                                Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                Command="{Binding Transcription.CopyStatusToClipboardCommand}"
                                                DockPanel.Dock="Right"
                                                Height="24" Width="28" FontSize="12" Padding="0"
                                                VerticalAlignment="Top"
                                                ToolTip="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ã‚³ãƒ”ãƒ¼"/>
                                        <TextBox Text="{Binding Transcription.TranscriptionStatusText, Mode=OneWay}"
                                                 IsReadOnly="True"
                                                 BorderThickness="0"
                                                 Background="Transparent"
                                                 FontSize="12"
                                                 Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                 TextWrapping="Wrap"/>
                                    </DockPanel>
                                </StackPanel>

                                <ScrollViewer Grid.Row="2"
                                              Style="{StaticResource DarkScrollViewer}"
                                              VerticalScrollBarVisibility="Auto">
                                    <ItemsControl ItemsSource="{Binding Transcription.Segments}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border CornerRadius="12" Padding="12,8" Margin="0,0,0,8"
                                                        Background="{Binding Speaker, Converter={StaticResource SpeakerToBrush}}"
                                                        Cursor="Hand">
                                                    <Border.InputBindings>
                                                        <MouseBinding Gesture="LeftClick"
                                                            Command="{Binding DataContext.Playback.SeekToSegmentCommand,
                                                                RelativeSource={RelativeSource AncestorType=Window}}"
                                                            CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <StackPanel Grid.Column="0" Margin="0,0,10,0"
                                                                    VerticalAlignment="Top">
                                                            <TextBlock Text="{Binding Speaker, Converter={StaticResource SpeakerToIcon}}"
                                                                       FontSize="16" HorizontalAlignment="Center"/>
                                                            <TextBlock Text="{Binding Speaker, Converter={StaticResource SpeakerToLabel}}"
                                                                       FontSize="10"
                                                                       Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                                       HorizontalAlignment="Center"/>
                                                        </StackPanel>

                                                        <StackPanel Grid.Column="1">
                                                            <TextBlock FontSize="10"
                                                                       Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                                       Margin="0,0,0,4">
                                                                <Run Text="{Binding Start, Converter={StaticResource TimeSpanToString}, Mode=OneWay}"/>
                                                                <Run Text=" - "/>
                                                                <Run Text="{Binding End, Converter={StaticResource TimeSpanToString}, Mode=OneWay}"/>
                                                            </TextBlock>
                                                            <TextBlock Text="{Binding Text}"
                                                                       FontSize="14" TextWrapping="Wrap"
                                                                       Foreground="{StaticResource DarkCardTextBrush}"/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </Grid>
                        </TabItem>

                        <!-- å†ç”Ÿã‚¿ãƒ– -->
                        <TabItem Header="å†ç”Ÿ" Style="{StaticResource DarkTabItem}">
                            <Grid Margin="0,12,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <Grid Grid.Row="0" Margin="0,0,0,12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Button Grid.Column="0"
                                            Style="{StaticResource TotonoePrimaryButton}"
                                            Command="{Binding Playback.TogglePlayPauseCommand}"
                                            IsEnabled="{Binding Playback.IsLoaded}"
                                            Margin="0,0,8,0" Padding="16,0">
                                        <Button.Content>
                                            <TextBlock>
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Text" Value="â–¶ å†ç”Ÿ"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding Playback.IsPlaying}" Value="True">
                                                                <Setter Property="Text" Value="â¸ ä¸€æ™‚åœæ­¢"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </Button.Content>
                                    </Button>

                                    <Button Grid.Column="1"
                                            Content="â–  åœæ­¢"
                                            Style="{StaticResource SecondaryButton}"
                                            Command="{Binding Playback.StopCommand}"
                                            IsEnabled="{Binding Playback.IsLoaded}"
                                            Margin="0,0,12,0" Padding="12,0"/>

                                    <StackPanel Grid.Column="2" Orientation="Horizontal"
                                                VerticalAlignment="Center">
                                        <RadioButton Content="ðŸŽ™ Mic"
                                                     FontSize="11" Margin="0,0,8,0"
                                                     Foreground="{StaticResource DarkCardTextBrush}"
                                                     IsChecked="{Binding Playback.SelectedTrack, Converter={StaticResource EnumBoolConverter}, ConverterParameter={x:Static vm:PlaybackTrack.Mic}}"/>
                                        <RadioButton Content="ðŸ”Š Speaker"
                                                     FontSize="11"
                                                     Foreground="{StaticResource DarkCardTextBrush}"
                                                     IsChecked="{Binding Playback.SelectedTrack, Converter={StaticResource EnumBoolConverter}, ConverterParameter={x:Static vm:PlaybackTrack.Speaker}}"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="4" Orientation="Horizontal"
                                                VerticalAlignment="Center">
                                        <TextBlock Text="{Binding Playback.PositionText}"
                                                   FontFamily="{StaticResource MonoFont}"
                                                   FontSize="14"
                                                   Foreground="{StaticResource DarkCardTextBrush}"/>
                                        <TextBlock Text=" / "
                                                   FontSize="14"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"/>
                                        <TextBlock Text="{Binding Playback.DurationText}"
                                                   FontFamily="{StaticResource MonoFont}"
                                                   FontSize="14"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"/>
                                    </StackPanel>
                                </Grid>

                                <controls:WaveformControl Grid.Row="1"
                                    Height="80" Margin="0,0,0,4"
                                    WavFilePath="{Binding Playback.CurrentWavPath}"
                                    Position="{Binding Playback.CurrentPositionSeconds, Mode=TwoWay}"
                                    Duration="{Binding Playback.TotalDurationSeconds}"/>

                                <Slider Grid.Row="2"
                                        Style="{StaticResource DarkSlider}"
                                        Minimum="0"
                                        Maximum="{Binding Playback.TotalDurationSeconds}"
                                        Value="{Binding Playback.CurrentPositionSeconds, Mode=TwoWay}"
                                        IsEnabled="{Binding Playback.IsLoaded}"
                                        Margin="0,0,0,12"/>

                                <ScrollViewer Grid.Row="3"
                                              Style="{StaticResource DarkScrollViewer}"
                                              VerticalScrollBarVisibility="Auto">
                                    <ItemsControl ItemsSource="{Binding Playback.Segments}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border CornerRadius="12" Padding="12,8" Margin="0,0,0,6"
                                                        Background="{Binding Speaker, Converter={StaticResource SpeakerToBrush}}"
                                                        Cursor="Hand">
                                                    <Border.InputBindings>
                                                        <MouseBinding Gesture="LeftClick"
                                                            Command="{Binding DataContext.Playback.SeekToSegmentCommand,
                                                                RelativeSource={RelativeSource AncestorType=Window}}"
                                                            CommandParameter="{Binding}"/>
                                                    </Border.InputBindings>
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <StackPanel Grid.Column="0" Margin="0,0,10,0"
                                                                    VerticalAlignment="Top">
                                                            <TextBlock Text="{Binding Speaker, Converter={StaticResource SpeakerToIcon}}"
                                                                       FontSize="16" HorizontalAlignment="Center"/>
                                                            <TextBlock Text="{Binding Speaker, Converter={StaticResource SpeakerToLabel}}"
                                                                       FontSize="10"
                                                                       Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                                       HorizontalAlignment="Center"/>
                                                        </StackPanel>

                                                        <StackPanel Grid.Column="1">
                                                            <TextBlock FontSize="10"
                                                                       Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                                       Margin="0,0,0,4">
                                                                <Run Text="{Binding Start, Converter={StaticResource TimeSpanToString}, Mode=OneWay}"/>
                                                                <Run Text=" - "/>
                                                                <Run Text="{Binding End, Converter={StaticResource TimeSpanToString}, Mode=OneWay}"/>
                                                            </TextBlock>
                                                            <TextBlock Text="{Binding Text}"
                                                                       FontSize="14" TextWrapping="Wrap"
                                                                       Foreground="{StaticResource DarkCardTextBrush}"/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </Grid>
                        </TabItem>

                        <!-- è­°äº‹éŒ²ã‚¿ãƒ– -->
                        <TabItem Header="è­°äº‹éŒ²" Style="{StaticResource DarkTabItem}">
                            <Grid Margin="0,12,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <DockPanel Grid.Row="0" Margin="0,0,0,12">
                                    <Button Content="ã‚³ãƒ”ãƒ¼"
                                            Style="{StaticResource GhostButton}"
                                            Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                            Command="{Binding Transcription.CopyMinutesToClipboardCommand}"
                                            IsEnabled="{Binding Transcription.HasMinutesResult}"
                                            DockPanel.Dock="Right"
                                            Height="28" FontSize="11" Padding="8,0"
                                            VerticalAlignment="Center"/>

                                    <StackPanel Orientation="Horizontal">
                                        <Button Style="{StaticResource TotonoePrimaryButton}"
                                                Command="{Binding Transcription.GenerateMinutesCommand}"
                                                IsEnabled="{Binding Transcription.CanGenerateMinutes}"
                                                Margin="0,0,8,0">
                                            <Button.Content>
                                                <TextBlock>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Text" Value="è­°äº‹éŒ²ã‚’ç”Ÿæˆ"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding DataContext.Transcription.HasMinutesResult, RelativeSource={RelativeSource AncestorType=Window}}" Value="True">
                                                                    <Setter Property="Text" Value="è­°äº‹éŒ²ã‚’å†ç”Ÿæˆ"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Button.Content>
                                        </Button>

                                        <ComboBox Style="{StaticResource DarkComboBox}"
                                                  ItemContainerStyle="{StaticResource DarkComboBoxItem}"
                                                  ItemsSource="{Binding Transcription.AvailableMinutesEngines}"
                                                  SelectedItem="{Binding Transcription.SelectedMinutesEngine}"
                                                  DisplayMemberPath="DisplayName"
                                                  Visibility="{Binding Transcription.ShowMinutesEngineSelector, Converter={StaticResource BoolToVisibility}}"
                                                  IsEnabled="{Binding Transcription.CanGenerateMinutes}"
                                                  Width="180" Height="32" FontSize="12"
                                                  Margin="0,0,8,0"/>

                                        <Button Style="{StaticResource GhostButton}"
                                                Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                Command="{Binding Transcription.ToggleMinutesPromptVisibilityCommand}"
                                                Height="28" FontSize="11" Padding="8,0">
                                            <Button.Content>
                                                <TextBlock>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Text" Value="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â–¼"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding DataContext.Transcription.IsMinutesPromptVisible, RelativeSource={RelativeSource AncestorType=Window}}" Value="True">
                                                                    <Setter Property="Text" Value="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â–²"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Button.Content>
                                        </Button>

                                        <Button Content="ã‚­ãƒ£ãƒ³ã‚»ãƒ«"
                                                Style="{StaticResource SecondaryButton}"
                                                Command="{Binding Transcription.CancelMinutesGenerationCommand}"
                                                Visibility="{Binding Transcription.IsGeneratingMinutes, Converter={StaticResource BoolToVisibility}}"
                                                Height="36" FontSize="12"
                                                Margin="8,0,0,0"/>
                                    </StackPanel>
                                </DockPanel>

                                <!-- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç·¨é›†ã‚¨ãƒªã‚¢ï¼ˆæŠ˜ã‚ŠãŸãŸã¿ï¼‰ -->
                                <Border Grid.Row="1" Background="#252525" CornerRadius="6"
                                        Padding="10,8" Margin="0,0,0,8"
                                        Visibility="{Binding Transcription.IsMinutesPromptVisible, Converter={StaticResource BoolToVisibility}}">
                                    <StackPanel>
                                        <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠž -->
                                        <DockPanel Margin="0,0,0,8">
                                            <TextBlock Text="ãƒ—ãƒªã‚»ãƒƒãƒˆ" FontSize="11" FontWeight="SemiBold"
                                                       Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                       VerticalAlignment="Center" Margin="0,0,8,0"/>
                                            <Button Content="ãƒªã‚»ãƒƒãƒˆ" DockPanel.Dock="Right"
                                                    Style="{StaticResource GhostButton}"
                                                    Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                    Command="{Binding Transcription.ResetMinutesPromptsCommand}"
                                                    Height="24" FontSize="10" Padding="6,0" Margin="8,0,0,0"
                                                    VerticalAlignment="Center"
                                                    ToolTip="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãƒ—ãƒªã‚»ãƒƒãƒˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™"/>
                                            <ComboBox Style="{StaticResource DarkComboBox}"
                                                      ItemContainerStyle="{StaticResource DarkComboBoxItem}"
                                                      ItemsSource="{Binding Transcription.AvailablePresets}"
                                                      SelectedItem="{Binding Transcription.SelectedPreset}"
                                                      Height="32" FontSize="12">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Name}"/>
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>
                                        </DockPanel>
                                        <TextBlock Text="ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ" FontSize="11" FontWeight="SemiBold"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                   Margin="0,0,0,4"/>
                                        <TextBox Style="{StaticResource DarkTextBox}"
                                                 Text="{Binding Transcription.MinutesSystemPrompt, UpdateSourceTrigger=PropertyChanged}"
                                                 FontSize="12" Padding="8,6" Height="100"
                                                 TextWrapping="Wrap" AcceptsReturn="True"
                                                 VerticalScrollBarVisibility="Auto"
                                                 VerticalContentAlignment="Top"
                                                 Margin="0,0,0,8"/>
                                        <TextBlock Text="ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ" FontSize="11" FontWeight="SemiBold"
                                                   Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                   Margin="0,0,0,4"/>
                                        <TextBox Style="{StaticResource DarkTextBox}"
                                                 Text="{Binding Transcription.MinutesUserPrompt, UpdateSourceTrigger=PropertyChanged}"
                                                 FontSize="12" Padding="8,6" Height="120"
                                                 TextWrapping="Wrap" AcceptsReturn="True"
                                                 VerticalScrollBarVisibility="Auto"
                                                 VerticalContentAlignment="Top"/>
                                    </StackPanel>
                                </Border>

                                <DockPanel Grid.Row="2" Margin="0,0,0,8">
                                    <Button Content="&#xE8C8;"
                                            FontFamily="Segoe MDL2 Assets"
                                            Style="{StaticResource GhostButton}"
                                            Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                            Command="{Binding Transcription.CopyStatusToClipboardCommand}"
                                            DockPanel.Dock="Right"
                                            Height="24" Width="28" FontSize="12" Padding="0"
                                            VerticalAlignment="Top"
                                            ToolTip="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ã‚³ãƒ”ãƒ¼"/>
                                    <TextBox Text="{Binding Transcription.TranscriptionStatusText, Mode=OneWay}"
                                             IsReadOnly="True"
                                             BorderThickness="0"
                                             Background="Transparent"
                                             FontSize="12"
                                             Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                             TextWrapping="Wrap"/>
                                </DockPanel>

                                <TextBox Grid.Row="3"
                                         Text="{Binding Transcription.MinutesText, Mode=OneWay}"
                                         IsReadOnly="True"
                                         TextWrapping="Wrap"
                                         VerticalScrollBarVisibility="Auto"
                                         FontSize="14"
                                         FontFamily="{StaticResource MonoFont}"
                                         Background="Transparent"
                                         Foreground="{StaticResource DarkCardTextBrush}"
                                         BorderThickness="0"
                                         CaretBrush="{StaticResource DarkCardTextBrush}"/>
                            </Grid>
                        </TabItem>
                        <!-- ã¨ã¨ã®ãˆã‚¿ãƒ– -->
                        <TabItem Header="ã¨ã¨ã®ãˆ" Style="{StaticResource DarkTabItem}">
                            <ScrollViewer Margin="0,12,0,0"
                                          Style="{StaticResource DarkScrollViewer}"
                                          VerticalScrollBarVisibility="Auto">
                                <StackPanel>
                                    <!-- èª¬æ˜Žãƒ†ã‚­ã‚¹ãƒˆ -->
                                    <TextBlock FontSize="12"
                                               Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                               TextWrapping="Wrap" Margin="0,0,0,10">
                                        è¿½åŠ ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ã€è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸè­°äº‹éŒ²ã‚’ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã§ãã¾ã™ã€‚
                                    </TextBlock>

                                    <!-- è¿½åŠ æƒ…å ±ã®ææ¡ˆï¼ˆè­°äº‹éŒ²ç”Ÿæˆå¾Œã«è¡¨ç¤ºï¼‰ -->
                                    <Border Background="#1a2d1a" CornerRadius="6"
                                            BorderBrush="#3a6a3a" BorderThickness="1"
                                            Padding="12,10" Margin="0,0,0,14">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="Visibility" Value="Visible"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Transcription.HasAdditionalInfoSuggestion}" Value="False">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                        <StackPanel>
                                            <TextBlock Text="&#x1F4A1; è¿½åŠ æƒ…å ±ã®ææ¡ˆ"
                                                       FontSize="12" FontWeight="SemiBold"
                                                       Foreground="#8BC34A"
                                                       Margin="0,0,0,6"/>
                                            <TextBlock FontSize="11"
                                                       Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                       TextWrapping="Wrap" Margin="0,0,0,6">
                                                è­°äº‹éŒ²ã‚’å®Œæˆã•ã›ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®æƒ…å ±ã‚’ã”ç¢ºèªãã ã•ã„ã€‚ä¸‹ã®å…¥åŠ›æ¬„ã§è£œè¶³ã§ãã¾ã™ã€‚
                                            </TextBlock>
                                            <TextBox Text="{Binding Transcription.TotonoeAdditionalInfoSuggestion, Mode=OneWay}"
                                                     IsReadOnly="True"
                                                     TextWrapping="Wrap"
                                                     FontSize="12"
                                                     Background="Transparent"
                                                     Foreground="{StaticResource DarkCardTextBrush}"
                                                     BorderThickness="0"
                                                     Padding="0"
                                                     CaretBrush="{StaticResource DarkCardTextBrush}"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- ãŠå®¢æ§˜ã®ä¼šç¤¾å -->
                                    <TextBlock Text="ãŠå®¢æ§˜ã®ä¼šç¤¾å" FontSize="12" FontWeight="SemiBold"
                                               Foreground="{StaticResource DarkCardTextBrush}"
                                               Margin="0,0,0,4"/>
                                    <TextBox Style="{StaticResource DarkTextBox}"
                                             Text="{Binding Transcription.TotonoeCustomerCompany, UpdateSourceTrigger=PropertyChanged}"
                                             FontSize="13" Padding="8,0" Height="34"
                                             Margin="0,0,0,10"/>

                                    <!-- ãŠå®¢æ§˜ã®å‚åŠ è€… -->
                                    <TextBlock Text="ãŠå®¢æ§˜ã®å‚åŠ è€…åï¼ˆã‚«ãƒ³ãƒžåŒºåˆ‡ã‚Šï¼‰" FontSize="12" FontWeight="SemiBold"
                                               Foreground="{StaticResource DarkCardTextBrush}"
                                               Margin="0,0,0,4"/>
                                    <TextBox Style="{StaticResource DarkTextBox}"
                                             Text="{Binding Transcription.TotonoeCustomerParticipants, UpdateSourceTrigger=PropertyChanged}"
                                             FontSize="13" Padding="8,0" Height="34"
                                             Margin="0,0,0,10"/>

                                    <!-- è‡ªç¤¾ã®å‚åŠ è€… -->
                                    <TextBlock Text="è‡ªç¤¾ã®å‚åŠ è€…åï¼ˆã‚«ãƒ³ãƒžåŒºåˆ‡ã‚Šï¼‰" FontSize="12" FontWeight="SemiBold"
                                               Foreground="{StaticResource DarkCardTextBrush}"
                                               Margin="0,0,0,4"/>
                                    <TextBox Style="{StaticResource DarkTextBox}"
                                             Text="{Binding Transcription.TotonoeOurParticipants, UpdateSourceTrigger=PropertyChanged}"
                                             FontSize="13" Padding="8,0" Height="34"
                                             Margin="0,0,0,10"/>

                                    <!-- ä¼šè­°ã®ç›®çš„ãƒ»å†…å®¹ -->
                                    <TextBlock Text="ä¼šè­°ã®ç›®çš„ãƒ»å†…å®¹" FontSize="12" FontWeight="SemiBold"
                                               Foreground="{StaticResource DarkCardTextBrush}"
                                               Margin="0,0,0,4"/>
                                    <TextBox Style="{StaticResource DarkTextBox}"
                                             Text="{Binding Transcription.TotononeMeetingPurpose, UpdateSourceTrigger=PropertyChanged}"
                                             FontSize="13" Padding="8,6" Height="68"
                                             TextWrapping="Wrap" AcceptsReturn="True"
                                             VerticalScrollBarVisibility="Auto"
                                             VerticalContentAlignment="Top"
                                             Margin="0,0,0,10"/>

                                    <!-- å°‚é–€ç”¨èªžãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ -->
                                    <TextBlock Text="å°‚é–€ç”¨èªžãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜" FontSize="12" FontWeight="SemiBold"
                                               Foreground="{StaticResource DarkCardTextBrush}"
                                               Margin="0,0,0,4"/>
                                    <TextBox Style="{StaticResource DarkTextBox}"
                                             Text="{Binding Transcription.TotononeDomainKnowledge, UpdateSourceTrigger=PropertyChanged}"
                                             FontSize="13" Padding="8,6" Height="88"
                                             TextWrapping="Wrap" AcceptsReturn="True"
                                             VerticalScrollBarVisibility="Auto"
                                             VerticalContentAlignment="Top"
                                             Margin="0,0,0,6"/>

                                    <!-- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤ºãƒˆã‚°ãƒ« + ã¨ã¨ã®ãˆå®Ÿè¡Œãƒœã‚¿ãƒ³ -->
                                    <DockPanel Margin="0,10,0,0">
                                        <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center">
                                            <TextBox Text="{Binding Transcription.TotonoeStatusText, Mode=OneWay}"
                                                     IsReadOnly="True"
                                                     BorderThickness="0"
                                                     Background="Transparent"
                                                     FontSize="12"
                                                     Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                     VerticalAlignment="Center"/>
                                            <Button Content="&#xE8C8;"
                                                    FontFamily="Segoe MDL2 Assets"
                                                    Style="{StaticResource GhostButton}"
                                                    Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                    Command="{Binding Transcription.CopyTotonoeStatusToClipboardCommand}"
                                                    Height="24" Width="28" FontSize="12" Padding="0"
                                                    VerticalAlignment="Center" Margin="4,0,0,0"
                                                    ToolTip="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ã‚³ãƒ”ãƒ¼"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <Button Style="{StaticResource GhostButton}"
                                                    Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                    Command="{Binding Transcription.ToggleTotonoePromptVisibilityCommand}"
                                                    Height="28" FontSize="11" Padding="8,0"
                                                    VerticalAlignment="Center" Margin="0,0,8,0">
                                                <Button.Content>
                                                    <TextBlock>
                                                        <TextBlock.Style>
                                                            <Style TargetType="TextBlock">
                                                                <Setter Property="Text" Value="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â–¼"/>
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding DataContext.Transcription.IsTotonoePromptVisible, RelativeSource={RelativeSource AncestorType=Window}}" Value="True">
                                                                        <Setter Property="Text" Value="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â–²"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </TextBlock.Style>
                                                    </TextBlock>
                                                </Button.Content>
                                            </Button>
                                        <Button Style="{StaticResource TotonoePrimaryButton}"
                                                Command="{Binding Transcription.TotonoeRegenerateCommand}"
                                                IsEnabled="{Binding Transcription.CanGenerateMinutes}"
                                                Padding="20,0">
                                            <Button.Content>
                                                <TextBlock>
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Text" Value="âœ¨ ã¨ã¨ã®ãˆã‚‹"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding DataContext.Transcription.IsTotonoeGenerating, RelativeSource={RelativeSource AncestorType=Window}}" Value="True">
                                                                    <Setter Property="Text" Value="ã¨ã¨ã®ãˆä¸­..."/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Button.Content>
                                        </Button>

                                        <Button Content="ã‚­ãƒ£ãƒ³ã‚»ãƒ«"
                                                Style="{StaticResource SecondaryButton}"
                                                Command="{Binding Transcription.CancelTotonoeRegenerationCommand}"
                                                Visibility="{Binding Transcription.IsTotonoeGenerating, Converter={StaticResource BoolToVisibility}}"
                                                Height="36" FontSize="12"
                                                Margin="8,0,0,0"/>
                                        </StackPanel>
                                    </DockPanel>

                                    <!-- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç·¨é›†ã‚¨ãƒªã‚¢ï¼ˆæŠ˜ã‚ŠãŸãŸã¿ï¼‰ -->
                                    <Border Background="#252525" CornerRadius="6"
                                            Padding="10,8" Margin="0,10,0,0"
                                            Visibility="{Binding Transcription.IsTotonoePromptVisible, Converter={StaticResource BoolToVisibility}}">
                                        <StackPanel>
                                            <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠž -->
                                            <DockPanel Margin="0,0,0,8">
                                                <TextBlock Text="ãƒ—ãƒªã‚»ãƒƒãƒˆ" FontSize="11" FontWeight="SemiBold"
                                                           Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                           VerticalAlignment="Center" Margin="0,0,8,0"/>
                                                <Button Content="ãƒªã‚»ãƒƒãƒˆ" DockPanel.Dock="Right"
                                                        Style="{StaticResource GhostButton}"
                                                        Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                        Command="{Binding Transcription.ResetTotonoePromptsCommand}"
                                                        Height="24" FontSize="10" Padding="6,0" Margin="8,0,0,0"
                                                        VerticalAlignment="Center"
                                                        ToolTip="ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ãƒ—ãƒªã‚»ãƒƒãƒˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™"/>
                                                <ComboBox Style="{StaticResource DarkComboBox}"
                                                          ItemContainerStyle="{StaticResource DarkComboBoxItem}"
                                                          ItemsSource="{Binding Transcription.AvailablePresets}"
                                                          SelectedItem="{Binding Transcription.SelectedPreset}"
                                                          Height="32" FontSize="12">
                                                    <ComboBox.ItemTemplate>
                                                        <DataTemplate>
                                                            <TextBlock Text="{Binding Name}"/>
                                                        </DataTemplate>
                                                    </ComboBox.ItemTemplate>
                                                </ComboBox>
                                            </DockPanel>
                                            <TextBlock Text="ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ" FontSize="11" FontWeight="SemiBold"
                                                       Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                       Margin="0,0,0,4"/>
                                            <TextBox Style="{StaticResource DarkTextBox}"
                                                     Text="{Binding Transcription.TotonoeSystemPrompt, UpdateSourceTrigger=PropertyChanged}"
                                                     FontSize="12" Padding="8,6" Height="100"
                                                     TextWrapping="Wrap" AcceptsReturn="True"
                                                     VerticalScrollBarVisibility="Auto"
                                                     VerticalContentAlignment="Top"
                                                     Margin="0,0,0,8"/>
                                            <TextBlock Text="ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ" FontSize="11" FontWeight="SemiBold"
                                                       Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                       Margin="0,0,0,4"/>
                                            <TextBox Style="{StaticResource DarkTextBox}"
                                                     Text="{Binding Transcription.TotonoeUserPrompt, UpdateSourceTrigger=PropertyChanged}"
                                                     FontSize="12" Padding="8,6" Height="120"
                                                     TextWrapping="Wrap" AcceptsReturn="True"
                                                     VerticalScrollBarVisibility="Auto"
                                                     VerticalContentAlignment="Top"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- ã¨ã¨ã®ãˆçµæžœè¡¨ç¤º -->
                                    <Border Margin="0,16,0,0"
                                            Background="#252525" CornerRadius="8"
                                            Padding="12,10">
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Setter Property="Visibility" Value="Visible"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Transcription.HasTotonoeResult}" Value="False">
                                                        <Setter Property="Visibility" Value="Collapsed"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>
                                        <StackPanel>
                                            <DockPanel Margin="0,0,0,8">
                                                <TextBlock Text="âœ¨ ã¨ã¨ã®ãˆæ¸ˆã¿è­°äº‹éŒ²"
                                                           FontSize="12" FontWeight="SemiBold"
                                                           Foreground="{StaticResource TotonoeAccentBrush}"
                                                           VerticalAlignment="Center"
                                                           DockPanel.Dock="Left"/>
                                                <Button Content="ã‚³ãƒ”ãƒ¼"
                                                        Style="{StaticResource GhostButton}"
                                                        Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                                        Command="{Binding Transcription.CopyTotonoeResultToClipboardCommand}"
                                                        HorizontalAlignment="Right"
                                                        Height="24" FontSize="11" Padding="8,0"/>
                                            </DockPanel>
                                            <TextBox Text="{Binding Transcription.TotonoeResultText, Mode=OneWay}"
                                                     IsReadOnly="True"
                                                     TextWrapping="Wrap"
                                                     FontSize="13"
                                                     FontFamily="{StaticResource MonoFont}"
                                                     Background="Transparent"
                                                     Foreground="{StaticResource DarkCardTextBrush}"
                                                     BorderThickness="0"
                                                     CaretBrush="{StaticResource DarkCardTextBrush}"/>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </Grid>
            </Border>
        </Grid>

        <!-- ====== Row 6: ãƒ•ãƒƒã‚¿ãƒ¼ ====== -->
        <DockPanel Grid.Row="6" Margin="0,8,0,0">
            <TextBlock Text="v0.1"
                       FontSize="11"
                       Foreground="{StaticResource TextSecondaryBrush}"
                       VerticalAlignment="Center"
                       DockPanel.Dock="Left"/>
            <Button Content="â“" Style="{StaticResource GhostButton}"
                    Foreground="{StaticResource TextSecondaryBrush}"
                    Command="{Binding OpenHelpCommand}"
                    HorizontalAlignment="Right"
                    Height="24" Width="28" Padding="0" FontSize="14"
                    ToolTip="ä½¿ã„æ–¹ã‚’è¡¨ç¤º"/>
        </DockPanel>
    </Grid>
</Window>
