<Window x:Class="OnlineMeetingRecorder.Views.HelpDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="使い方"
        SizeToContent="Height" Width="520"
        MaxHeight="680"
        Background="{StaticResource WindowBgBrush}"
        FontFamily="{StaticResource PrimaryFont}"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True">

    <Border Background="{StaticResource DarkCardBgBrush}"
            CornerRadius="16" Padding="28,24"
            BorderBrush="{StaticResource DarkCardBgAltBrush}"
            BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="4" BlurRadius="24"
                              Opacity="0.4" Color="Black"/>
        </Border.Effect>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ヘッダー -->
            <DockPanel Grid.Row="0" Margin="0,0,0,20">
                <TextBlock Text="❓" FontSize="24" VerticalAlignment="Center"
                           Margin="0,0,12,0" DockPanel.Dock="Left"/>
                <TextBlock Text="Totonoe の使い方" FontSize="20" FontWeight="SemiBold"
                           Foreground="{StaticResource DarkCardTextBrush}"
                           VerticalAlignment="Center"/>
            </DockPanel>

            <!-- コンテンツ -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto"
                          MaxHeight="480">
                <StackPanel>
                    <!-- 録音モード -->
                    <Border Background="#252525" CornerRadius="10" Padding="16,14" Margin="0,0,0,12">
                        <StackPanel>
                            <TextBlock FontSize="15" FontWeight="SemiBold"
                                       Foreground="{StaticResource AccentBrush}"
                                       Margin="0,0,0,8">
                                🎙 録音モード
                            </TextBlock>
                            <TextBlock FontSize="13" Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                       TextWrapping="Wrap" LineHeight="22">
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">1.</Run>
                                <Run>マイクとスピーカーを選択します</Run>
                                <LineBreak/>
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">2.</Run>
                                <Run>「録音開始」ボタンで会議の録音を開始します</Run>
                                <LineBreak/>
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">3.</Run>
                                <Run>「停止して保存」で録音を終了します</Run>
                                <LineBreak/>
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">4.</Run>
                                <Run>録音終了後、自動で文字起こしと議事録が生成されます</Run>
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!-- ととのえモード -->
                    <Border Background="#252525" CornerRadius="10" Padding="16,14" Margin="0,0,0,12">
                        <StackPanel>
                            <TextBlock FontSize="15" FontWeight="SemiBold"
                                       Foreground="{StaticResource TotonoeAccentBrush}"
                                       Margin="0,0,0,8">
                                📋 ととのえモード
                            </TextBlock>
                            <TextBlock FontSize="13" Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                       TextWrapping="Wrap" LineHeight="22">
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">セッション一覧:</Run>
                                <Run>過去の録音セッションを選択して内容を確認できます</Run>
                                <LineBreak/>
                                <LineBreak/>
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">文字起こしタブ:</Run>
                                <Run>文字起こし結果を確認・再実行できます</Run>
                                <LineBreak/>
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">再生タブ:</Run>
                                <Run>録音した音声を再生し、文字起こしと同期して確認できます</Run>
                                <LineBreak/>
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">議事録タブ:</Run>
                                <Run>AI生成された議事録の確認・再生成ができます。「プロンプト」ボタンでAIへの指示を確認・編集できます</Run>
                                <LineBreak/>
                                <Run FontWeight="SemiBold" Foreground="{StaticResource DarkCardTextBrush}">ととのえタブ:</Run>
                                <Run>参加者や会議目的などの追加情報を入力して、議事録をブラッシュアップできます。ととのえ結果は元の議事録とは別に保存されます</Run>
                            </TextBlock>
                        </StackPanel>
                    </Border>

                    <!-- ヒント -->
                    <Border Background="#252525" CornerRadius="10" Padding="16,14">
                        <StackPanel>
                            <TextBlock FontSize="15" FontWeight="SemiBold"
                                       Foreground="{StaticResource WarningBrush}"
                                       Margin="0,0,0,8">
                                💡 ヒント
                            </TextBlock>
                            <TextBlock FontSize="13" Foreground="{StaticResource DarkCardTextSecondaryBrush}"
                                       TextWrapping="Wrap" LineHeight="22">
                                <Run>• ヘッダーのトグルスイッチで録音⇔ととのえを切り替えます</Run>
                                <LineBreak/>
                                <Run>• セッション名はダブルクリックで編集できます</Run>
                                <LineBreak/>
                                <Run>• ⚙ 設定からAPIキーやモデルを変更できます</Run>
                                <LineBreak/>
                                <Run>• 📂 ボタンでセッションのフォルダを直接開けます</Run>
                                <LineBreak/>
                                <Run>• 議事録・ととのえの「プロンプト」ボタンでAIプロンプトを編集できます</Run>
                                <LineBreak/>
                                <Run>• ととのえ結果は minutes_totonoe.md に別ファイルで保存されます</Run>
                            </TextBlock>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>

            <!-- 閉じるボタン -->
            <Button Grid.Row="2" Content="閉じる"
                    Style="{StaticResource TotonoePrimaryButton}"
                    Click="OnClose_Click"
                    HorizontalAlignment="Right"
                    Padding="24,0" Margin="0,20,0,0"/>
        </Grid>
    </Border>
</Window>
